<header>
    <h2>Adicionar item à coleção</h2>
</header>

<form>

    <div class="search-movie">

        <input class="search-movie__input" #searchBox type="search" name="search" placeholder="Pesquisar filme"
            (input)="searchMovies(searchBox.value)" />

        <button [disabled]="!movieSelected()">Salvar</button>


        @if (results()?.Response) {

        <ul class="search-movie__list">

            @if (isSearchLoading()) {
            <p>Carregando...</p>
            }

            @if (results()?.totalResults) {
            <p>{{ results()?.totalResults }} resultados encontrados</p>
            }
            @for (movie of results()?.Search; track movie.imdbID) {
            <li class="search-movie__results" (click)="selectMovie(movie.imdbID)">
                <img class="search-movie__poster"
                    [src]="movie.Poster !== 'N/A' ? movie.Poster : 'assets/default-poster.png'" alt="{{ movie.Title }}"
                    #poster (error)="poster.src = 'assets/default-poster.png'">
                <h3 class="search-movie__title">{{ movie.Title }}</h3>
                <p class="search-movie__year">{{ movie.Year }}</p>
            </li>
            }
        </ul>
        }


    </div>
    @if (movieSelected()) {
    <div class="movie__details">
        <div class="movie__poster">
            <img [src]="movieSelected()?.Poster !== 'N/A' ? movieSelected()?.Poster : 'assets/default-poster.png'"
                alt="{{ movieSelected()?.Title }}" class="movie__poster-image">
        </div>
        <div class="movie__info">
            <h3>{{ movieSelected()?.Title }}</h3>
            <p>{{ movieSelected()?.Year }}</p>
            <p>Diretor: {{ movieSelected()?.Director }}</p>
            <p>Atores: {{ movieSelected()?.Actors }}</p>
            <p>Roteirista: {{ movieSelected()?.Writer }}</p>
            <p>Gênero: {{ movieSelected()?.Genre }}</p>
            <p>País: {{ movieSelected()?.Country }}</p>
            <p>Língua: {{ movieSelected()?.Language }}</p>
        </div>
        <!-- <div class="movie__info">
            <h4>Detalhes do filme</h4>
            <label for="title" class="movie__title">
                Título:
                <input type="text" name="title" placeholder="Ex: Jurassic Park">
            </label>
            <label for="director" class="movie__director">
                Diretor:
                <input type="text" name="director" placeholder="Ex: Steven Spielberg">
            </label>
            <label for="writer" class="movie__writer">
                Roteirista:
                <input type="text" name="writer" placeholder="Ex: John Doe">
            </label>
            <label for="year" class="movie__year">
                Ano:
                <input type="text" name="year" placeholder="Ex: 1993">
            </label>
            <label for="genre" class="movie__genre">
                Gênero:
                <input type="text" name="genre" placeholder="Ex: Ação, Aventura">
            </label>
            <label for="duration" class="movie__duration">
                Duração:
                <input type="text" name="duration" placeholder="Ex: 120 minutos">
            </label>
            <label for="actors" class="movie__actors">
                Atores:
                <input type="text" name="actors" placeholder="Ex: John Doe, Jane Doe">
            </label>
            <label for="language" class="movie__language">
                Idioma original:
                <input type="text" name="language" placeholder="Ex: Inglês">
            </label>
            <label for="country" class="movie__country">
                País de origem:
                <input type="text" name="country" placeholder="Ex: Estados Unidos">
            </label>
            <label for="plot" class="movie__plot">
                Sinopse:
                <textarea name="plot"
                    placeholder="Ex: Um parque temático com dinossauros geneticamente recriados..."></textarea>
            </label>
        </div> -->
    </div>

    <div class="item__details card">
        <h4>Detalhes do item</h4>
        <label for="format" class="item__format">
            <p>Formato:</p>
            <select name="format" placeholder="Ex: DVD, Blu-ray, Digital">
                <option value="dvd">DVD</option>
                <option value="bluray">Blu-ray</option>
                <option value="vhs">VHS</option>
            </select>
        </label>
        <label for="condition" class="item__condition">
            <p>Condição:</p>
            <select name="condition" placeholder="Ex: Novo, Usado - Bom, Usado - Ruim">
                <option value="new">Novo</option>
                <option value="used-good">Usado - Bom</option>
                <option value="used-poor">Usado - Ruim</option>
            </select>
        </label>
        <label for="edition" class="item__edition">
            <p>Edição:</p>
            <input type="text" name="edition" placeholder="Ex: Versão extendida">
        </label>
        <label for="numero-discos" class="item__number-discs">
            <p>Número de discos:</p>
            <input type="number" name="numero-discos" placeholder="Ex: 1" min="1">
        </label>
        <label for="idiomas-audio" class="item__audio-languages">
            <p>Idiomas de áudio:</p>
            <input type="text" name="idiomas-audio" placeholder="Ex: Inglês, Português">
        </label>
        <label for="idiomas-legenda" class="item__subtitle-languages">
            <p>Idiomas de legenda:</p>
            <input type="text" name="idiomas-legenda" placeholder="Ex: Inglês, Português">
        </label>
        <label for="local-armazenamento" class="item__storage-location">
            <p>Local de armazenamento:</p>
            <input type="text" name="local-armazenamento" placeholder="Ex: Estante 3, Prateleira 2">
        </label>
        <label for="data-aquisicao" class="item__acquisition-date">
            <p>Data de aquisição:</p>
            <input type="date" name="data-aquisicao">
        </label>
        <label for="fornecedor" class="item__supplier">
            <p>Fornecedor:</p>
            <input type="text" name="fornecedor" placeholder="Ex: Bazar do Antônio, Amazon">
        </label>
        <label for="valor-aquisicao" class="item__acquisition-value">
            <p>Valor de aquisição:</p>
            <input type="number" name="valor-aquisicao" placeholder="Ex: 59.99" min="0" step="0.01">
        </label>
        <label for="valor-mercado" class="item__market-value">
            <p>Valor de mercado:</p>
            <input type="number" name="valor-mercado" placeholder="Ex: 79.99" min="0" step="0.01">
        </label>
        <label for="favorito" class="item__favorite">
            <p>Favorito:</p>
            <input type="checkbox" name="favorito">
        </label>
        <label for="wishlist" class="item__wishlist">
            <p>Lista de desejos:</p>
            <input type="checkbox" name="wishlist">
        </label>
        <label for="nota-pessoal" class="item__personal-rating">
            <p>Nota pessoal:</p>
            <input type="number" name="nota-pessoal" placeholder="Ex: 8" min="0" max="10" step="0.1">
        </label>
        <label for="data-ultima-visualizacao" class="item__last-viewed-date">
            <p>Data da última visualização:</p>
            <input type="date" name="data-ultima-visualizacao">
        </label>
        <label for="observacoes" class="item__notes">
            <p>Observações:</p>
            <textarea name="observacoes" placeholder="Ex: Edição de colecionador, com extras..."></textarea>
        </label>
    </div>
    }

</form>